<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Pet Pals!</title>

    <!-- google fonts -->
    <link href="https://fonts.googleapis.com/css?family=Oswald" rel="stylesheet">

    <!-- plotly cdn -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <!-- d3 cdn -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.min.js"></script>

    <!-- bootstrap stylesheets -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
        crossorigin="anonymous">

    <!-- our stylesheet -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <!-- vis.js dependencies -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/vis.css') }}" type="text/css">
    <script type="text/javascript" src="{{ url_for('static', filename='js/vis.js') }}"></script>
</head>

<body>
    <div class="container">
        <div class="jumbotron" style="text-align: center">
            <h1>Exploration of Landslides</h1>
        </div>
    </div>
    <!-- The div where we will inject our map -->
    <div id="map"></div>
    <div id="mynetwork"></div>

    <script>
        // create an array with nodes
        var nodes = new vis.DataSet([
            // inner circle nodes
            { id: 1, label: 'Asia' },
            { id: 2, label: 'Africa' },
            { id: 3, label: 'North America' },
            { id: 4, label: 'South America' },
            { id: 5, label: 'Antartica' },
            { id: 6, label: 'Europe' },
            { id: 7, label: 'Oceania' }
        ]);
        // below code is used to add countries from json file into viz
        var vis_link = "/api/vis"
        d3.json(vis_link, function (error, data) {
            if (error) throw error;

            data.forEach(function (value, index) {
                nodes.add({
                    id: (index + 8), label: value.country_code
                });
            })
        });

        // create an array with edges
        var edges = new vis.DataSet([
            // edges for inner circle
            { from: 1, to: 2 },
            { from: 2, to: 3 },
            { from: 3, to: 4 },
            { from: 4, to: 5 },
            { from: 5, to: 6 },
            { from: 6, to: 7 },
            { from: 7, to: 1 }
        ]);

        // below code used to properly connect country nodes to the continents
        d3.json(vis_link, function (error, data) {
            if (error) throw error;

            data.forEach(function (value, index) {
                if (value.continent_code == 'NA') {
                    edges.add({
                        from: 3, to: (index + 8)
                    })
                } else if (value.continent_code == 'AF') {
                    edges.add({
                        from: 2, to: (index + 8)
                    })
                } else if (value.continent_code == 'AS') {
                    edges.add({
                        from: 1, to: (index + 8)
                    })
                } else if (value.continent_code == 'EU') {
                    edges.add({
                        from: 6, to: (index + 8)
                    })
                } else if (value.continent_code == 'OC') {
                    edges.add({
                        from: 7, to: (index + 8)
                    })
                } else {
                    edges.add({
                        from: 4, to: (index + 8)
                    })
                }
            })


        });

        // create a network
        var container = document.getElementById('mynetwork');

        // provide the data in the vis format
        var data = {
            nodes: nodes,
            edges: edges
        };
        var options = {};

        // initialize your network!
        var network = new vis.Network(container, data, options);
    </script>




    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>

</html>